"use strict";(self.webpackChunkcytoscape_clj=self.webpackChunkcytoscape_clj||[]).push([[568,592],{1568:(e,t,s)=>{s.r(t),s.d(t,{CytoscapeModel:()=>i.CytoscapeModel,CytoscapeView:()=>i.CytoscapeView,ElementModel:()=>i.ElementModel,ElementView:()=>i.ElementView,MODULE_NAME:()=>o.o,MODULE_VERSION:()=>o.Y});var o=s(8657),i=s(5592)},8657:(e,t,s)=>{s.d(t,{Y:()=>i,o:()=>n});const o=s(4147),i=o.version,n=o.name},5592:(e,t,s)=>{s.r(t),s.d(t,{CytoscapeModel:()=>x,CytoscapeView:()=>k,ElementModel:()=>j,ElementView:()=>E});var o=s(8947),i=s(8657),n=s(3379),a=s.n(n),c=s(7795),l=s.n(c),d=s(569),h=s.n(d),r=s(3565),m=s.n(r),_=s(9216),p=s.n(_),g=s(4589),u=s.n(g),y=s(3889),b={};b.styleTagTransform=u(),b.setAttributes=m(),b.insert=h().bind(null,"head"),b.domAPI=l(),b.insertStyleElement=p(),a()(y.Z,b),y.Z&&y.Z.locals&&y.Z.locals;var f=s(2099),v=s.n(f);const w=s(8947);class j extends o.WidgetModel{defaults(){return{...super.defaults(),_model_name:"ElementModel",_model_module:i.o,_model_module_version:i.Y,_view_name:"ElementView",_view_module:i.o,_view_module_version:i.Y,group:"nodes",removed:!1,selected:!1,selectable:!0,locked:!1,grabbed:!1,grabbable:!0,classes:[],data:{},position:{}}}}class x extends o.DOMWidgetModel{defaults(){return{...super.defaults(),_model_name:"CytoscapeModel",_model_module:i.o,_model_module_version:i.Y,_view_name:"CytoscapeView",_view_module:i.o,_view_module_version:i.Y,elements:[],graph_style:[],graph_layouts:[],zoom:1,pan:{x:0,y:0},min_zoom:1e-50,max_zoom:1e50,zooming_enabled:!0,user_zooming_enabled:!0,panning_enabled:!0,user_panning_enabled:!0,box_selection_enabled:!1,selection_type:"single",touch_tap_threshold:8,desktop_tap_threshhold:4,autolock:!1,auto_ungrabify:!1,auto_unselectify:!1,headless:!1,style_enabled:!0,hide_edges_on_viewport:!1,texture_on_viewport:!1,motion_blur:!1,motion_blur_opacity:.2,wheel_sensitivity:1,pixel_ratio:"auto",context_menus:[]}}}x.serializers={context_menus:{deserialize:w.unpack_models},elements:{deserialize:w.unpack_models},graph_layouts:{deserialize:w.unpack_models},...o.DOMWidgetModel.serializers};class E extends o.WidgetView{constructor(e){super({model:e.model,options:e.options}),this.is_rendered=!1,this.cytoscape_obj=this.options.cytoscape_obj,this.model.on("change:selected",this.selected_changed,this),this.model.on("change:selectable",this.selectable_changed,this),this.model.on("change:removed",this.removed_changed,this),this.model.on("change:locked",this.locked_changed,this),this.model.on("change:grabbable",this.grabbable_changed,this),this.model.on("change:classes",this.classes_changed,this),this.model.on("change:data",this.data_changed,this),this.model.on("change:position",this.position_changed,this),this.on("remove",(()=>{this.cytoscape_obj&&this.ele.remove()}))}getElements(){return this.cytoscape_obj.filter((e=>e.data("_cid")==this.cid))}selected_changed(){this.model.get("selected")?this.ele.select():this.ele.unselect()}selectable_changed(){this.model.get("selectable")?this.ele.selectify():this.ele.unselectify()}removed_changed(){this.model.get("removed")?this.ele.remove():this.ele.restore()}locked_changed(){this.model.get("locked")?this.ele.lock():this.ele.unlock()}grabbable_changed(){this.model.get("grabbable")?this.ele.grabify():this.ele.ungrabify()}classes_changed(){this.ele.classes(this.model.get("classes"))}data_changed(){this.ele.data({_cid:this.cid,...this.model.get("data")})}position_changed(){this.ele.position(this.model.get("position"))}render(){this.cytoscape_obj?this.is_rendered||(this.is_rendered=!0,this.ele=this.cytoscape_obj.add({group:this.model.get("group"),data:{_cid:this.cid,...this.model.get("data")},classes:this.model.get("classes"),selectable:this.model.get("selectable"),selected:this.model.get("selected")})):this.el.innerHTML="Cytoscape element only usable in a Cytoscape widget."}set_visibility(){this.cytoscape_obj&&this.is_rendered&&this.model.get("removed")&&this.ele.remove()}}class k extends o.DOMWidgetView{constructor(){super(...arguments),this.is_rendered=!1,this.in_elements_changing=!1}initialize(e){super.initialize(e),this.elementViews=new w.ViewList(this.create_cy_child_view,this.remove_cy_child_view,this),this.contextMenuViews=new w.ViewList(this.create_cy_child_view,this.remove_cy_child_view,this),this.layoutViews=new w.ViewList(this.create_cy_child_view,this.remove_cy_child_view,this),this.model.on("msg:custom",this.handle_custom_message.bind(this))}async findElementView(e){let t=await Promise.all(this.elementViews.views);for(let s of t)if(s.cid==e)return s}handle_custom_message(e){this.cytoscape_obj&&this.cytoscape_obj.ready((()=>{switch(e.do){case"reset":this.cytoscape_obj.reset();break;case"fit":this.cytoscape_obj.fit();break;case"center":this.cytoscape_obj.center();break;case"layout":this.graph_layouts_changed();break;case"toggle_fullscreen":document.fullscreenElement?document.exitFullscreen():this.el.requestFullscreen()}}))}handleEvent(e){"contextmenu"===e.type&&e.stopPropagation()}render(){super.render(),this.displayed.then((()=>{this.el.classList.add("cytoscape-widget"),this.el.classList.add("jupyter-widgets"),this.el.addEventListener("contextmenu",this),this.cy_container=document.createElement("div"),this.el.appendChild(this.cy_container),this.cytoscape_obj=v()({container:this.cy_container,minZoom:this.model.get("min_zoom"),maxZoom:this.model.get("max_zoom"),zoomingEnabled:this.model.get("zooming_enabled"),zoom:this.model.get("zoom"),pan:this.model.get("pan"),userZoomingEnabled:this.model.get("user_zooming_enabled"),panningEnabled:this.model.get("panning_enabled"),boxSelectionEnabled:this.model.get("box_selection_enabled"),selectionType:this.model.get("selection_type"),touchTapThreshold:this.model.get("touch_tap_threshold"),desktopTapThreshold:this.model.get("desktop_tap_threshold"),autolock:this.model.get("autolock"),autoungrabify:this.model.get("auto_ungrabify"),autounselectify:this.model.get("auto_unselectify"),headless:this.model.get("headless"),styleEnabled:this.model.get("style_enabled"),hideEdgesOnViewport:this.model.get("hide_edges_on_viewport"),textureOnViewport:this.model.get("texture_on_viewport"),motionBlur:this.model.get("motion_blur"),motionBlurOpacity:this.model.get("motion_blur_opacity"),wheelSensitivity:this.model.get("wheel_sensitivity"),style:this.model.get("graph_style")}),this.wireCytoscape(),this.wireModel()}))}wireModel(){this.model.on("change:elements",this.elements_changed,this),this.model.on("change:context_menus",this.context_menus_changed,this),this.model.on("change:min_zoom",(()=>{this.cytoscape_obj.minZoom(this.model.get("min_zoom"))}),this),this.model.on("change:max_zoom",(()=>{this.cytoscape_obj.maxZoom(this.model.get("max_zoom"))}),this),this.model.on("change:zooming_enabled",(()=>{this.cytoscape_obj.zoomingEnabled(this.model.get("zooming_enabled"))}),this),this.model.on("change:user_zooming_enabled",(()=>{this.cytoscape_obj.userZoomingEnabled(this.model.get("user_zooming_enabled"))}),this),this.model.on("change:zoom",(()=>{this.cytoscape_obj.zoom(this.model.get("zoom"))}),this),this.model.on("change:pan",(()=>{this.cytoscape_obj.pan(this.model.get("pan"))}),this),this.model.on("change:panning_enabled",(()=>{this.cytoscape_obj.selectionType(this.model.get("panning_enabled"))}),this),this.model.on("change:box_selection_enabled",(()=>{this.cytoscape_obj.boxSelectionEnabled(this.model.get("box_selection_enabled"))}),this),this.model.on("change:selection_type",(()=>{this.cytoscape_obj.selectionType(this.model.get("selection_type"))}),this),this.model.on("change:autolock",(()=>{this.cytoscape_obj.autolock(this.model.get("autolock"))}),this),this.model.on("change:auto_ungrabify",(()=>{this.cytoscape_obj.autoungrabify(this.model.get("auto_ungrabify"))}),this),this.model.on("change:auto_unselectify",(()=>{this.cytoscape_obj.autounselectify(this.model.get("auto_unselectify"))}),this),this.model.on("change:graph_style",(()=>{this.cytoscape_obj.style(this.model.get("graph_style"))}),this),this.model.on("change:graph_layouts",this.graph_layouts_changed,this)}wireCytoscape(){this.cytoscape_obj.on("pan",(e=>{this.model.set("pan",this.cytoscape_obj.pan()),this.model.save_changes()})),this.cytoscape_obj.on("zoom",(e=>{this.model.set("zoom",this.cytoscape_obj.zoom()),this.model.save_changes()})),this.cytoscape_obj.on("add",(async e=>{if(!this.in_elements_changing){const t=await this.findElementView(e.target.data("_cid"));t&&(t.model.set("removed",!1),t.model.save_changes())}})),this.cytoscape_obj.on("remove",(async e=>{if(!this.in_elements_changing){const t=await this.findElementView(e.target.data("_cid"));t&&(t.model.set("removed",!0),t.model.save_changes())}})),this.cytoscape_obj.on("select",(async e=>{const t=await this.findElementView(e.target.data("_cid"));t&&(t.model.set("selected",!0),t.model.save_changes())})),this.cytoscape_obj.on("unselect",(async e=>{const t=await this.findElementView(e.target.data("_cid"));t&&(t.model.set("selected",!1),t.model.save_changes())})),this.cytoscape_obj.on("lock",(async e=>{const t=await this.findElementView(e.target.data("_cid"));t&&(t.model.set("locked",!0),t.model.save_changes())})),this.cytoscape_obj.on("unlock",(async e=>{const t=await this.findElementView(e.target.data("_cid"));t&&(t.model.set("locked",!1),t.model.save_changes())})),this.cytoscape_obj.on("grab",(async e=>{const t=await this.findElementView(e.target.data("_cid"));t&&(t.model.set("grabbed",!0),t.model.save_changes())})),this.cytoscape_obj.on("free",(async e=>{const t=await this.findElementView(e.target.data("_cid"));t&&(t.model.set("grabbed",!1),t.model.save_changes())})),this.cytoscape_obj.on("position",(async e=>{const t=await this.findElementView(e.target.data("_cid"));t&&(t.model.set("position",e.target.position()),t.model.save_changes())})),this.cytoscape_obj.ready((()=>{this.context_menus_changed(),this.elements_changed()}))}processLuminoMessage(e){super.processLuminoMessage(e),"resize"!==e.type&&"after-show"!==e.type||!this.cytoscape_obj||(this.cytoscape_obj.resize(),this.cytoscape_obj.fit())}async elements_changed(){this.in_elements_changing=!0;let e=await this.elementViews.update(this.model.get("elements"));for(let t of e)"nodes"===t.model.get("group")&&await t.render();for(let t of e)"edges"===t.model.get("group")&&await t.render();for(let t of e)t.set_visibility();this.in_elements_changing=!1,await this.graph_layouts_changed()}context_menus_changed(){this.contextMenuViews.update(this.model.get("context_menus")).then((e=>Promise.all(e.map((e=>e.render())))))}async graph_layouts_changed(){if(!this.in_elements_changing){let e=await this.layoutViews.update(this.model.get("graph_layouts"));for(let t of e)await t.render()}}create_cy_child_view(e,t){return this.create_child_view(e,{cytoscape_obj:this.cytoscape_obj})}remove_cy_child_view(e){e.remove()}}},3889:(e,t,s)=>{s.d(t,{Z:()=>c});var o=s(8081),i=s.n(o),n=s(3645),a=s.n(n)()(i());a.push([e.id,".__________cytoscape_container {\n    height: 100%;\n    width: 100%;\n    background-color: white;\n}\n\n.jupyter-widgets.cytoscape-widget {\n    height: 400px;\n    overflow: hidden;\n    flex: 1 1 auto;\n}\n\n",""]);const c=a},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",o=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),o&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),o&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,o,i,n){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(o)for(var c=0;c<this.length;c++){var l=this[c][0];null!=l&&(a[l]=!0)}for(var d=0;d<e.length;d++){var h=[].concat(e[d]);o&&a[h[0]]||(void 0!==n&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=n),s&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=s):h[2]=s),i&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=i):h[4]="".concat(i)),t.push(h))}},t}},8081:e=>{e.exports=function(e){return e[1]}},3379:e=>{var t=[];function s(e){for(var s=-1,o=0;o<t.length;o++)if(t[o].identifier===e){s=o;break}return s}function o(e,o){for(var n={},a=[],c=0;c<e.length;c++){var l=e[c],d=o.base?l[0]+o.base:l[0],h=n[d]||0,r="".concat(d," ").concat(h);n[d]=h+1;var m=s(r),_={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==m)t[m].references++,t[m].updater(_);else{var p=i(_,o);o.byIndex=c,t.splice(c,0,{identifier:r,updater:p,references:1})}a.push(r)}return a}function i(e,t){var s=t.domAPI(t);return s.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,i){var n=o(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<n.length;a++){var c=s(n[a]);t[c].references--}for(var l=o(e,i),d=0;d<n.length;d++){var h=s(n[d]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}n=l}}},569:e=>{var t={};e.exports=function(e,s){var o=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(s)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,s)=>{e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var o="";s.supports&&(o+="@supports (".concat(s.supports,") {")),s.media&&(o+="@media ".concat(s.media," {"));var i=void 0!==s.layer;i&&(o+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),o+=s.css,i&&(o+="}"),s.media&&(o+="}"),s.supports&&(o+="}");var n=s.sourceMap;n&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},4147:e=>{e.exports=JSON.parse('{"name":"cytoscape-clj","version":"0.5.0","description":"A Cytoscape Widget for Common Lisp Jupyter","keywords":["cytoscape","jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["{dist,lib}/**/*.{js,ts,map}","css/*.css","LICENSE.md"],"homepage":"https://github.com/yitzchak/cytoscape-clj","bugs":{"url":"https://github.com/yitzchak/cytoscape-clj/issues"},"license":"MIT","author":{"name":"Tarn W. Burton","email":"twburton@gmail.com"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/yitzchak/cytoscape-clj"},"scripts":{"build":"tsc && jupyter-labextension build","lint":"eslint . --ext .ts --fix","lint-check":"eslint . --ext .ts","prepack":"yarn run build"},"dependencies":{"@jupyter-widgets/base":"^6.0.4","@types/cytoscape":"^3.19.9","cytoscape":"^3.25.0","cytoscape-cola":"^2.5.1","cytoscape-cxtmenu":"^3.5.0","cytoscape-dagre":"^2.5.0","cytoscape-fcose":"^2.2.0","cytoscape-klay":"^3.1.4"},"devDependencies":{"@jupyterlab/builder":"^4.0.1","@types/node":"^20.2.5","@typescript-eslint/eslint-plugin":"^5.27.0","@typescript-eslint/parser":"^5.27.0","eslint":"^8.16.0","eslint-config-standard":"^17.0.0","eslint-plugin-import":"^2.22.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^4.0.0","eslint-plugin-promise":"^6.0.0","eslint-plugin-standard":"^5.0.0","lint-staged":"^13.0.3","typescript":"^5.1.3"},"jupyterlab":{"extension":"lib/plugin","outputDir":"prebuilt"},"lint-staged":{"*.ts":["eslint . --ext .ts --fix"]},"prettier":{"singleQuote":true}}')}}]);